- hosts: all
  tasks:
    - name: Add IP and local domain to hosts
      shell: |
        set -e
        set -x
        ip route get 8.8.8.8 | awk 'NR==1 {print $NF}' | tr '\n' ' ' | sudo tee -a /etc/hosts
        hostname | sudo tee -a /etc/hosts
    # Dirty ugly workaround on contrail-ansible-deployer not using 'become' in playbooks
    - name: Create directories for contrail
      shell: |
        set -e
        set -x
        sudo mkdir -p /var/log/contrail
        sudo mkdir -p /etc/contrail
        sudo chmod 777 /var/log/contrail /etc/contrail
